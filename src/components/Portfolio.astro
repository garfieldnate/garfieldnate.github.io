---
// A two-column layout with images on the left and descriptions on the right
// For small screens, we collapse both columns into a single column
// Standard image size is 400 x 300 px, but it's okay to deviate a bit on the height
import { Picture } from "astro-imagetools/components";
import { SupportedLang } from "../languages";
import { Project } from "../pages/portfolio/projects";

export interface Props {
    projects: Project[]
    lang: SupportedLang
};

const {
    projects,
    lang
} = Astro.props as Props;
---

<div class="portfolio">
    {projects.map(({
    img_src,
    img_alt,
    name,
    description,
    license,
    copyright,
    repo }) => (
    <h4 class="small-only">{name}</h4>
    <div class="column">
        <figure>
            <Picture src={img_src} alt={img_alt} width={400} />
            {!!license && (<footer>©️{copyright}, <span set:html={license}/></footer>)}
        </figure>
    </div>
    <div class="column">
        <h4 class="big-only">{name}</h4>
        <p class="desc" set:html={description}></p>
        {!!repo && (<a href={repo} class="repo">View Source</a>)}
    </div>
    ))}
</div>

<style>
    .portfolio {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 5rem 10%;
        align-items: center;
    }

    @media screen and (max-width: 600px) {

        /* collapse two columns into one */
        .portfolio {
            display: block;
        }

        /* Display project name before image */
        .big-only {
            display: none;
        }
    }

    @media not screen and (max-width: 600px) {

        /* Display project name before description */
        .small-only {
            display: none;
        }
    }

    .column {
        width: 100%;
        height: auto;
    }

    figure {
        margin: 0;
    }

    footer {
        font-size: .9rem;
        color: rgb(75,85,99);
        text-align: center;
        margin-top: 1em;
    }
</style>
